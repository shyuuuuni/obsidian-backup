
> [!tip] 이벤트 흐름
> HTML 문서는 각 엘리먼트(Element)가 _계층적 트리 구조_ 를 이루고 있다. 이러한 형태 때문에, 자바스크립트로 등록한 이벤트의 실행 흐름 또한 계층적 구조를 따라 연쇄적으로 발생한다.

# 이벤트 캡처링

자바스크립트에서 이벤트의 실행 흐름 중 이벤트 캡처링은 ==HTML 문서 상에서 최상단의 엘리먼트부터 이벤트가 실제로 발생한 타겟 엘리먼트의 이벤트 핸들러가 동작할 때 까지 이벤트 핸들러를 동작==하는 것을 의미한다.

즉, 최상위 window 객체에서부터 시작하여, 이벤트 타겟 엘리먼트까지 자식 엘리먼트를 방문하며 이벤트 핸들러를 실행시키는 실행 흐름을 의미한다.
# 이벤트 캡처링을 사용하는 방법

자바스크립트는 이벤트 핸들러를 등록할 때 기본적으로 **이벤트 캡처링이 아닌** [[이벤트 버블링 (Event Bubbling)]]을 사용하도록 작동한다.

하지만 이벤트 핸들러를 등록하는 `addEventHandler` 함수를 호출할 때, 파라미터를 조작하여 이벤트 캡처링을 사용하도록 할 수 있다.

```javascript
addEventListener(type, listener);
addEventListener(type, listener, options);
addEventListener(type, listener, useCapture);
```

`addEventListener` 함수는 위와 같이 3가지 형태로 사용이 가능하다. 그 중 두번째와 세번째 형태를 사용하면 이벤트 캡처링을 사용할 수 있다.

먼저 `options` 라는 객체를 전달해 이벤트 리스너를 등록할 때 옵션을 전달할 수 있다. 옵션 중 `capture` 라는 프로퍼티를 `true`로 설정하면 이벤트 캡처링을 사용할 수 있다.

```javascript
my_element.addEventListener("click", eventCallback, { capture: true });
```

다음으로 `useCapture` 라는 부울 타입의 매개변수를 전달할 수 있다. `useCapture` 값을 `true`로 설정하면 이벤트 캡처링을 사용할 수 있다.

```javascript
my_element.addEventListener("click", eventCallback, true);
```

# 이벤트 캡처링 활용방법

이벤트 캡처링은 기본값인 [[이벤트 버블링 (Event Bubbling)]] 과 다르게 별도로 설정을 해야 사용할 수 있다.

이벤트의 종류와 기능에 따라 다르지만 일반적으로 다음과 같이 활용할 수 있다.

1. **이벤트 위임([[이벤트 위임 (Event Delegation)]])**: 이벤트 캡처링은 상위 엘리먼트에서 하위 엘리먼트의 순서로 이벤트를 처리한다. 따라서 하위 엘리먼트 각각에 이벤트 핸들러를 등록하는 대신 상위 엘리먼트에서 일괄적으로 이벤트 핸들러를 등록하여 처리하는 방식을 사용할 수 있다.
2. **이벤트 실행 흐름 제어**: 타겟 엘리먼트의 이벤트를 실행하기 전에 상위 엘리먼트의 이벤트를 실행할 수 있으므로, 특정 작업에 대한 전처리를 하는 등 이벤트의 실행 흐름을 제어할 수 있다.

